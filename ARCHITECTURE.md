 ## ì¸ì¦ ìƒíƒœ ê´€ë¦¬ êµ¬ì¡°:

  1. JWT í† í° (ì¿ í‚¤) - ì„œë²„ ì¸ì¦

  - ìœ„ì¹˜: HttpOnly ì¿ í‚¤ (auth-token)
  - ëª©ì : ì„œë²„ì‚¬ì´ë“œ ì¸ì¦ ë° ë³´ì•ˆ
  - ë§Œë£Œ: 24ì‹œê°„
  - ì„¤ì •: /api/auth/client/login APIì—ì„œ ì„¤ì •
  - ì‚¬ìš©: middleware, API routeì—ì„œ ê²€ì¦

  2. LocalStorage (Zustand persist) - í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ

  - ìœ„ì¹˜: localStorage (auth-storage-v2)
  - ëª©ì : í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ UI ìƒíƒœ ê´€ë¦¬ (ë¹ ë¥¸ ì ‘ê·¼)
  - ì €ì¥ ë°ì´í„°: user ê°ì²´ë§Œ (id, type, phone, name ë“±)
  - ì‚¬ìš©: í˜ì´ì§€ ë¡œë”© ì‹œ ì¦‰ì‹œ ì‚¬ìš©ì ì •ë³´ í‘œì‹œ

  ì‘ë™ ë°©ì‹:

  1. ë¡œê·¸ì¸ ì‹œ:
  ë¡œê·¸ì¸ API â†’ JWT ìƒì„± â†’ ì¿ í‚¤ ì„¤ì • â†’ user ë°ì´í„° ë°˜í™˜
  â†’ Zustand store ì—…ë°ì´íŠ¸ â†’ localStorage ìë™ ì €ì¥
  2. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ:
  localStorageì—ì„œ user ë³µì› (ë¹ ë¦„)
  â†’ /api/auth/me í˜¸ì¶œ (ì¿ í‚¤ JWT ê²€ì¦)
  â†’ ìµœì‹  ì‚¬ìš©ì ì •ë³´ë¡œ ì—…ë°ì´íŠ¸
  3. ë³´ì•ˆ:
    - JWTëŠ” HttpOnly ì¿ í‚¤ë¼ JavaScriptë¡œ ì ‘ê·¼ ë¶ˆê°€
    - localStorageëŠ” UI í‘œì‹œìš©ì´ì§€ ì¸ì¦ìš©ì´ ì•„ë‹˜
    - ì‹¤ì œ ê¶Œí•œ ê²€ì¦ì€ ì„œë²„ì—ì„œ ì¿ í‚¤ JWTë¡œë§Œ ìˆ˜í–‰

  ì¥ì :

  - âœ… ë³´ì•ˆ: HttpOnly ì¿ í‚¤ë¡œ XSS ê³µê²© ë°©ì§€
  - âœ… UX: localStorageë¡œ ì¦‰ì‹œ UI í‘œì‹œ (ë¡œë”© ì—†ìŒ)
  - âœ… ì‹ ë¢°ì„±: ì„œë²„ëŠ” í•­ìƒ JWTë§Œ ì‹ ë¢°

  ë‹¨ì :

  - âš ï¸ ì¤‘ë³µ ê´€ë¦¬: ì¿ í‚¤ì™€ localStorage ë™ê¸°í™” í•„ìš”
  - âš ï¸ localStorageëŠ” XSSì— ì·¨ì•½í•˜ë¯€ë¡œ ë¯¼ê° ì •ë³´ ì €ì¥ ê¸ˆì§€

## ğŸ“ í´ë” êµ¬ì¡°

```
src/
â”œâ”€â”€ app/                          # App Router í˜ì´ì§€
â”‚   â”œâ”€â”€ (auth)/                   # ì¸ì¦ì´ í•„ìš”í•œ í˜ì´ì§€ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”œâ”€â”€ member-info/
â”‚   â”‚   â”œâ”€â”€ subscription/
â”‚   â”‚   â”œâ”€â”€ coupons/
â”‚   â”‚   â””â”€â”€ layout.tsx            # ì¸ì¦ í™•ì¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ (public)/                 # ê³µê°œ í˜ì´ì§€ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”œâ”€â”€ signup/
â”‚   â”‚   â”œâ”€â”€ price-list/
â”‚   â”‚   â””â”€â”€ guide/
â”‚   â””â”€â”€ (hybrid)/                 # ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥¸ UI
â”‚       â”œâ”€â”€ page.tsx              # í™ˆí˜ì´ì§€
â”‚       â””â”€â”€ knife-request/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/                     # ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ auth-guard.tsx
â”‚   â”‚   â”œâ”€â”€ login-prompt.tsx
â”‚   â”‚   â”œâ”€â”€ auth-aware.tsx
â”‚   â”‚   â””â”€â”€ guest-fallback.tsx
â”‚   â”œâ”€â”€ ui/                       # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ features/                 # ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ profile/
â”‚       â”‚   â”œâ”€â”€ authenticated-profile.tsx
â”‚       â”‚   â””â”€â”€ guest-profile.tsx
â”‚       â”œâ”€â”€ knife-request/
â”‚       â”‚   â”œâ”€â”€ authenticated-request.tsx
â”‚       â”‚   â””â”€â”€ guest-request.tsx
â”‚       â””â”€â”€ home/
â”‚           â”œâ”€â”€ authenticated-home.tsx
â”‚           â””â”€â”€ guest-home.tsx
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ auth-store.ts
â”‚   â”œâ”€â”€ user-data-store.ts        # ì‚¬ìš©ì ë°ì´í„° (ì£¼ë¬¸ë‚´ì—­ ë“±)
â”‚   â””â”€â”€ app-store.ts              # ì•± ì „ì—­ ìƒíƒœ
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ use-auth-redirect.ts      # ì¸ì¦ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¡œì§
â”‚   â”œâ”€â”€ use-require-auth.ts       # ì¸ì¦ í•„ìˆ˜ í›…
â”‚   â””â”€â”€ use-auth-aware.ts         # ì¸ì¦ ì¸ì‹ ë¡œì§
â”œâ”€â”€ middleware.ts                 # Next.js ë¯¸ë“¤ì›¨ì–´
â””â”€â”€ lib/
    â”œâ”€â”€ auth/
    â”œâ”€â”€ route-config.ts           # ë¼ìš°íŠ¸ ì„¤ì •
    â””â”€â”€ permissions.ts            # ê¶Œí•œ ê´€ë¦¬
```

## ğŸ”’ ë¼ìš°íŠ¸ ë¶„ë¥˜

### ì¸ì¦ í•„ìˆ˜ (`/auth/*`)
- `/profile` - í”„ë¡œí•„ í˜ì´ì§€
- `/member-info` - íšŒì› ì •ë³´
- `/subscription` - êµ¬ë… ê´€ë¦¬
- `/coupons` - ì¿ í° ê´€ë¦¬
- `/usage-history` - ì´ìš© ë‚´ì—­

### ê³µê°œ í˜ì´ì§€ (`/public/*`)
- `/login` - ë¡œê·¸ì¸
- `/signup` - íšŒì›ê°€ì…
- `/price-list` - ê°€ê²©í‘œ
- `/guide` - ê°€ì´ë“œ
- `/notices` - ê³µì§€ì‚¬í•­

### í•˜ì´ë¸Œë¦¬ë“œ (`/hybrid/*`)
- `/` - í™ˆí˜ì´ì§€ (ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¥¸ ê°œì¸í™”)
- `/knife-request` - ì¹¼ê°ˆì´ ì‹ ì²­ (ê²ŒìŠ¤íŠ¸ë„ ê°€ëŠ¥, ê²°ì œì‹œ ë¡œê·¸ì¸ ìœ ë„)

## ğŸ›¡ ë³´ì•ˆ ì •ì±…

### ë¯¸ë“¤ì›¨ì–´ ê¸°ë°˜ ë³´í˜¸
- ì¸ì¦ í•„ìˆ˜ ë¼ìš°íŠ¸ ìë™ ë³´í˜¸
- ë¡œê·¸ì¸ í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰íŠ¸
- í† í° ë§Œë£Œ ê²€ì¦

### ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ ë³´í˜¸
- AuthGuard ì»´í¬ë„ŒíŠ¸
- ê¶Œí•œë³„ UI ë Œë”ë§
- ë¡œë”© ìƒíƒœ ì²˜ë¦¬
