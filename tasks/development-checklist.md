# 개발 체크리스트

이 문서는 칼가는곳 앱 개발시 반복적으로 확인해야 할 사항들을 정리한 체크리스트입니다.

## 🚀 새 기능 개발시 체크리스트

### 📋 개발 시작 전
- [ ] **기존 패턴 확인**: `tasks/` 폴더의 관련 작업 문서 검토
- [ ] **아키텍처 준수**: 인증 시스템, 라우트 분류 등 기존 구조 활용
- [ ] **타입 정의**: TypeScript 인터페이스 및 타입 정의 사전 계획
- [ ] **컴포넌트 재사용**: 기존 UI 컴포넌트 최대한 활용

### 🔐 인증 관련 기능
- [ ] **라우트 분류**: 보호된/공개/하이브리드 중 적절한 분류
- [ ] **AuthAware 사용**: 조건부 UI 렌더링에 `<AuthAware>` 컴포넌트 활용
- [ ] **미들웨어 업데이트**: 새 보호 라우트시 `middleware.ts` 업데이트
- [ ] **권한 체크**: 적절한 인증 훅 사용 (`useAuthAware`, `useRequireAuth` 등)

### 🎨 UI/UX 구현
- [ ] **모바일 우선**: 최대 폭 500px, 모바일 퍼스트 디자인
- [ ] **한글 폰트**: Do Hyeon (제목), Nanum Gothic (본문) 사용
- [ ] **브랜드 컬러**: Primary #E67E22 (오렌지) 활용
- [ ] **로딩 상태**: 비동기 작업시 적절한 로딩 스피너 표시
- [ ] **에러 처리**: 사용자 친화적인 에러 메시지

### 📱 반응형 및 접근성
- [ ] **반응형 디자인**: Tailwind CSS 브레이크포인트 활용
- [ ] **키보드 네비게이션**: Tab 키로 모든 요소 접근 가능
- [ ] **스크린 리더**: 적절한 aria-label, alt 텍스트
- [ ] **컬러 대비**: WCAG 가이드라인 준수

## 🧪 테스트 및 검증

### ✅ 기능 테스트
- [ ] **로그인 플로우**: 전화번호 → 인증번호 → 로그인 완료
- [ ] **상태 지속**: 새로고침 후 로그인 상태 유지
- [ ] **자동 리다이렉트**: 보호된 페이지 접근시 적절한 리다이렉트
- [ ] **하이브리드 동작**: 게스트/로그인 사용자별 다른 UX 확인

### 🔒 보안 검증
- [ ] **토큰 관리**: 로그인/로그아웃시 쿠키 자동 생성/삭제
- [ ] **XSS 방지**: 사용자 입력 데이터 적절한 이스케이핑
- [ ] **CSRF 방지**: 상태 변경 요청에 적절한 보호
- [ ] **권한 체크**: 클라이언트와 서버 모두에서 권한 확인

### 📊 성능 검증
- [ ] **번들 크기**: 불필요한 라이브러리 추가 여부
- [ ] **리렌더링**: 불필요한 컴포넌트 리렌더링 방지
- [ ] **메모리 누수**: useEffect 클린업 함수 적절히 구현
- [ ] **이미지 최적화**: Next.js Image 컴포넌트 활용

## 📱 디바이스 호환성

### 🎯 필수 테스트 환경
- [ ] **iPhone Safari**: iOS 최신 버전
- [ ] **Android Chrome**: Android 최신 버전
- [ ] **데스크톱 Chrome**: 최신 버전
- [ ] **다양한 화면 크기**: 320px ~ 500px 범위

### 📏 뷰포트 테스트
- [ ] **iPhone SE (375px)**: 최소 지원 크기
- [ ] **iPhone 14 (390px)**: 표준 크기
- [ ] **Galaxy S21 (360px)**: Android 표준
- [ ] **최대 폭 (500px)**: 데스크톱 환경

## 🔧 코드 품질

### 💻 코딩 스타일
- [ ] **ESLint 준수**: 린트 에러 해결
- [ ] **TypeScript**: 모든 변수/함수에 적절한 타입 지정
- [ ] **네이밍**: 명확하고 일관된 변수/함수명
- [ ] **주석**: 복잡한 로직에 적절한 주석 추가

### 🏗 아키텍처 준수
- [ ] **컴포넌트 분리**: 단일 책임 원칙 준수
- [ ] **훅 활용**: 로직 재사용을 위한 커스텀 훅 활용
- [ ] **폴더 구조**: 기존 폴더 구조와 일관성 유지
- [ ] **상태 관리**: Zustand store 적절히 활용

## 📝 문서화

### 📚 필수 문서화
- [ ] **컴포넌트 Props**: TypeScript 인터페이스로 명시
- [ ] **API 함수**: JSDoc 주석으로 설명
- [ ] **복잡한 로직**: 인라인 주석으로 설명
- [ ] **새 패턴**: README 또는 별도 문서로 가이드

### 📋 작업 완료시
- [ ] **작업 문서 생성**: `tasks/XX-작업명.md` 생성
- [ ] **README 업데이트**: 완료 목록에 작업 추가
- [ ] **체크리스트 갱신**: 새로운 패턴 발견시 체크리스트 업데이트
- [ ] **다음 작업 계획**: 관련 후속 작업 식별 및 우선순위 설정

## 🚫 피해야 할 것들

### ❌ 절대 하지 말 것
- [ ] **직접적인 쿠키 조작**: 인증 쿠키 수동 설정/삭제 금지
- [ ] **Context 사용**: 전역 상태는 Zustand 사용
- [ ] **인라인 스타일**: Tailwind CSS 클래스 사용
- [ ] **any 타입**: TypeScript any 타입 사용 금지

### ⚠️ 주의사항
- [ ] **Hydration 대기**: 컴포넌트에서 `useAuthHydration` 사용
- [ ] **상태 직접 변경**: Zustand 액션 함수를 통해서만 상태 변경
- [ ] **중복 패턴**: 기존 컴포넌트/훅 재사용 우선
- [ ] **하드코딩**: 설정값들을 constants 파일로 분리

## 🐛 디버깅 가이드

### 🔍 일반적인 이슈들

#### 인증 상태가 초기화되지 않음
```typescript
// 디버깅 코드
console.log('Auth State:', useAuthStore.getState())
console.log('Hydrated:', useAuthStore.persist.hasHydrated())

// 해결 방법: useAuthHydration 훅 사용
const { user, loading, isReady } = useAuthHydration()
if (!isReady) return <LoadingSpinner />
```

#### 보호된 라우트에 접근 불가
```typescript
// 미들웨어 설정 확인
// middleware.ts의 PROTECTED_ROUTES 배열 확인

// 클라이언트 가드 확인
<AuthGuard>
  <ProtectedComponent />
</AuthGuard>
```

#### 조건부 렌더링 오동작
```typescript
// AuthAware 컴포넌트 사용
<AuthAware fallback={<GuestUI />}>
  <AuthenticatedUI />
</AuthAware>
```

### 🛠 개발 도구 활용
- **Zustand DevTools**: 상태 변화 추적
- **React DevTools**: 컴포넌트 트리 및 props 확인
- **Network Tab**: API 호출 및 응답 확인
- **Console**: 에러 로그 및 디버깅 정보

## 🎯 성능 최적화 체크리스트

### ⚡️ 렌더링 최적화
- [ ] **React.memo**: 불필요한 리렌더링이 많은 컴포넌트에 적용
- [ ] **useMemo**: 비용이 큰 계산에 메모이제이션 적용
- [ ] **useCallback**: 자식 컴포넌트에 전달되는 함수 최적화
- [ ] **Zustand 선택자**: 필요한 상태만 구독하도록 최적화

### 📦 번들 최적화
- [ ] **동적 import**: 큰 컴포넌트는 lazy loading 적용
- [ ] **Tree Shaking**: 사용하지 않는 exports 제거
- [ ] **이미지 최적화**: WebP 포맷 및 적절한 크기 사용
- [ ] **폰트 최적화**: 필요한 글꼴만 로드

---

**이 체크리스트는 계속 업데이트됩니다. 새로운 패턴이나 이슈 발견시 추가해주세요.**